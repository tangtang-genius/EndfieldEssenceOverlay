<!-- src/EndfieldEssenceOverlay/MainWindow.xaml -->
<Window x:Class="EndfieldEssenceOverlay.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="기질 오버레이"
        Width="730" Height="200"
        MinWidth="600" MinHeight="180"
        Left="10" Top="10"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        Topmost="True"
        ResizeMode="NoResize"
        ShowInTaskbar="False"
        UseLayoutRounding="True"
        TextOptions.TextFormattingMode="Display"
        MouseLeftButtonDown="Window_MouseLeftButtonDown"
        Loaded="Window_Loaded">

    <!-- 라운드 코너 외곽 -->
    <Border CornerRadius="10"
            Background="#DD313739"
            BorderBrush="#447E807C"
            BorderThickness="1"
            Margin="4">
        <Border.Effect>
            <DropShadowEffect Color="Black" BlurRadius="12" ShadowDepth="2" Opacity="0.5"/>
        </Border.Effect>
        <Grid>
            <!-- 왼쪽 상태 액센트 바 -->
            <Border x:Name="AccentBar"
                    Width="5" HorizontalAlignment="Left"
                    Background="#7E807C"
                    CornerRadius="10,0,0,10"/>

            <Grid Margin="18,0,0,0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- 메인 컨텐츠 (고정 영역) -->
                <Grid Grid.Row="0" Margin="8,10,8,8">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Top">
                        <!-- 상태 아이콘 -->
                        <TextBlock x:Name="IconText"
                                   Text="⏳" FontSize="57"
                                   VerticalAlignment="Center"
                                   Margin="0,0,12,0"/>

                        <!-- 텍스트 영역 -->
                        <StackPanel VerticalAlignment="Center">
                            <TextBlock x:Name="StatusText"
                                       Text="초기화 중..."
                                       FontFamily="Malgun Gothic"
                                       FontSize="36" FontWeight="SemiBold"
                                       Foreground="#FFFFFF"/>
                            <TextBlock x:Name="DetailText"
                                       Text=""
                                       FontFamily="Malgun Gothic" FontSize="22"
                                       Foreground="#E0E0E0" TextWrapping="Wrap"
                                       Visibility="Collapsed"
                                       Margin="0,2,0,0"/>
                            <WrapPanel x:Name="EssencesPanel"
                                       Margin="0,6,0,0"
                                       Visibility="Collapsed"/>
                            <!-- 무기별 보유 등록 버튼 (동적) -->
                            <WrapPanel x:Name="OwnedButtonsPanel"
                                       Orientation="Horizontal"
                                       Visibility="Collapsed" Margin="0,4,0,0"/>
                        </StackPanel>
                    </StackPanel>

                    <!-- 우측 버튼 -->
                    <StackPanel Grid.Column="1" Orientation="Horizontal"
                                VerticalAlignment="Top" Margin="8,2,4,0">
                        <Button Content="⚙"
                                ToolTip="설정"
                                Width="44" Height="44"
                                Style="{x:Null}"
                                Background="Transparent" Foreground="#E0E0E0"
                                BorderThickness="0" FontSize="23" Cursor="Hand"
                                Click="SettingsButton_Click"/>
                        <Button Content="✕"
                                Width="44" Height="44"
                                Style="{x:Null}"
                                Background="Transparent" Foreground="#E0E0E0"
                                BorderThickness="0" FontSize="23" Cursor="Hand"
                                Click="CloseButton_Click"/>
                    </StackPanel>
                </Grid>

                <!-- 디버그 패널 -->
                <Border x:Name="DebugPanel"
                        Grid.Row="1"
                        Background="#227E807C"
                        CornerRadius="6"
                        Margin="8,0,8,8"
                        Visibility="Collapsed">
                    <TextBlock x:Name="DebugText"
                               Text="(감지 대기 중...)"
                               FontFamily="Consolas" FontSize="20"
                               Foreground="#F8F546"
                               Padding="8,6" TextWrapping="Wrap"/>
                </Border>
            </Grid>
        </Grid>
    </Border>
</Window>
